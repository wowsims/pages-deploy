import{m as e,l as a,n as t,r as s,a as l,q as n,s as i,u as o,D as r,T as p,t as c}from"./preset_utils-Cz_ySDGC.chunk.js";import{R as d}from"./suggest_reforges_action-pxTJ5qRK.chunk.js";import{F as u,G as m,aC as g,aD as I,aI as h,aF as S,$ as f,U as v,a as O,Q as k,V as T,a0 as R,aJ as P,aK as y}from"./detailed_results-BEc8O_jh.chunk.js";import{g as C,G,j as A,R as E,P as N,S as q,k as b,l as L,m as M,F as w,h as B}from"./localization-kgGUpfrJ.chunk.js";import{a as D,D as H,b as F,M as j}from"./inputs-B4xRDEmm.chunk.js";const x={type:"TypeAPL",prepullActions:[{action:{castSpell:{spellId:{spellId:55342}}},doAtValue:{const:{val:"-4.5s"}}},{action:{castSpell:{spellId:{spellId:116011}}},doAtValue:{const:{val:"-3s"}}},{action:{castSpell:{spellId:{otherId:"OtherActionPotion"}}},doAtValue:{const:{val:"-1.5s"}}},{action:{castSpell:{spellId:{spellId:30451}}},doAtValue:{const:{val:"-1.5s"}}}],priorityList:[{action:{condition:{and:{vals:[{spellIsKnown:{spellId:{spellId:116011}}},{or:{vals:[{auraIsInactive:{auraId:{spellId:116011},includeReactionTime:!0}},{cmp:{op:"OpLe",lhs:{auraRemainingTime:{auraId:{spellId:116011}}},rhs:{spellCastTime:{spellId:{spellId:116011}}}}}]}}]}},castSpell:{spellId:{spellId:116011}}}},{action:{condition:{and:{vals:[{cmp:{op:"OpLe",lhs:{auraRemainingTime:{auraId:{spellId:108978}}},rhs:{spellCastTime:{spellId:{spellId:30451}}}}},{auraIsActive:{auraId:{spellId:108978},includeReactionTime:!0}}]}},castSpell:{spellId:{spellId:44425}}}},{action:{condition:{and:{vals:[{cmp:{op:"OpGe",lhs:{remainingTime:{}},rhs:{math:{op:"OpMul",lhs:{dotTickFrequency:{spellId:{spellId:44457}}},rhs:{const:{val:"3"}}}}}}]}},multidot:{spellId:{spellId:44457},maxDots:3,maxOverlap:{math:{op:"OpAdd",lhs:{dotTickFrequency:{spellId:{spellId:44457}}},rhs:{inputDelay:{}}}}}}},{action:{strictMultidot:{spellId:{spellId:114923},maxDots:5,maxOverlap:{math:{op:"OpAdd",lhs:{dotTickFrequency:{spellId:{spellId:114923}}},rhs:{inputDelay:{}}}}}}},{action:{condition:{auraIsInactive:{sourceUnit:{type:"CurrentTarget"},auraId:{spellId:112948},includeReactionTime:!0}},castSpell:{spellId:{spellId:112948}}}},{action:{condition:{and:{vals:[{cmp:{op:"OpEq",lhs:{auraNumStacks:{auraId:{spellId:36032}}},rhs:{const:{val:"4"}}}},{cmp:{op:"OpGe",lhs:{auraNumStacks:{auraId:{spellId:79683},includeReactionTime:!0}},rhs:{const:{val:"1"}}}}]}},castSpell:{spellId:{spellId:26297}}}},{action:{condition:{and:{vals:[{cmp:{op:"OpEq",lhs:{auraNumStacks:{auraId:{spellId:36032}}},rhs:{const:{val:"4"}}}},{cmp:{op:"OpGe",lhs:{auraNumStacks:{auraId:{spellId:79683},includeReactionTime:!0}},rhs:{const:{val:"1"}}}}]}},castSpell:{spellId:{spellId:33697}}}},{action:{condition:{and:{vals:[{cmp:{op:"OpEq",lhs:{auraNumStacks:{auraId:{spellId:36032}}},rhs:{const:{val:"4"}}}},{cmp:{op:"OpGe",lhs:{auraNumStacks:{auraId:{spellId:79683},includeReactionTime:!0}},rhs:{const:{val:"1"}}}}]}},castSpell:{spellId:{spellId:12042}}}},{action:{condition:{and:{vals:[{cmp:{op:"OpEq",lhs:{auraNumStacks:{auraId:{spellId:36032}}},rhs:{const:{val:"4"}}}},{cmp:{op:"OpGe",lhs:{auraNumStacks:{auraId:{spellId:79683},includeReactionTime:!0}},rhs:{const:{val:"1"}}}},{auraIsActive:{auraId:{spellId:12042}}}]}},castSpell:{spellId:{itemId:76093}}}},{action:{condition:{and:{vals:[{cmp:{op:"OpEq",lhs:{auraNumStacks:{auraId:{spellId:36032}}},rhs:{const:{val:"4"}}}},{cmp:{op:"OpGe",lhs:{auraNumStacks:{auraId:{spellId:79683},includeReactionTime:!0}},rhs:{const:{val:"1"}}}}]}},castSpell:{spellId:{spellId:126734}}}},{action:{autocastOtherCooldowns:{}}},{action:{condition:{and:{vals:[{auraIsActive:{auraId:{spellId:12042}}},{spellIsReady:{spellId:{spellId:108978}}}]}},castSpell:{spellId:{itemId:36799}}}},{action:{condition:{and:{vals:[{cmp:{op:"OpEq",lhs:{auraNumStacks:{auraId:{spellId:36032}}},rhs:{const:{val:"4"}}}},{cmp:{op:"OpGe",lhs:{auraNumStacks:{auraId:{spellId:79683},includeReactionTime:!0}},rhs:{const:{val:"1"}}}},{auraIsActive:{auraId:{spellId:12042}}},{or:{vals:[{cmp:{op:"OpGe",lhs:{currentTime:{}},rhs:{const:{val:"10"}}}},{allTrinketStatProcsActive:{statType1:3,statType2:6,statType3:7}}]}}]}},castSpell:{spellId:{spellId:108978}}}},{action:{condition:{and:{vals:[{cmp:{op:"OpEq",lhs:{auraNumStacks:{auraId:{spellId:36032}}},rhs:{const:{val:"4"}}}},{cmp:{op:"OpEq",lhs:{auraNumStacks:{auraId:{spellId:79683},includeReactionTime:!0}},rhs:{const:{val:"0"}}}},{cmp:{op:"OpGt",lhs:{auraRemainingTime:{auraId:{spellId:108978}}},rhs:{spellCastTime:{spellId:{spellId:30451}}}}}]}},castSpell:{spellId:{spellId:30451}}}},{action:{condition:{and:{vals:[{cmp:{op:"OpEq",lhs:{auraNumStacks:{auraId:{spellId:36032}}},rhs:{const:{val:"4"}}}},{cmp:{op:"OpEq",lhs:{auraNumStacks:{auraId:{spellId:79683},includeReactionTime:!0}},rhs:{const:{val:"2"}}}}]}},castSpell:{spellId:{spellId:7268}}}},{action:{condition:{and:{vals:[{cmp:{op:"OpLe",lhs:{remainingTime:{}},rhs:{spellCastTime:{spellId:{spellId:30451}}}}},{cmp:{op:"OpGt",lhs:{remainingTime:{}},rhs:{spellTravelTime:{spellId:{spellId:44425}}}}}]}},castSpell:{spellId:{spellId:44425}}}},{action:{condition:{and:{vals:[{cmp:{op:"OpLe",lhs:{remainingTime:{}},rhs:{spellCastTime:{spellId:{spellId:30451}}}}},{cmp:{op:"OpLe",lhs:{remainingTime:{}},rhs:{spellTravelTime:{spellId:{spellId:44425}}}}}]}},castSpell:{spellId:{spellId:2136}}}},{action:{condition:{and:{vals:[{cmp:{op:"OpGe",lhs:{auraNumStacks:{auraId:{spellId:36032}}},rhs:{const:{val:"2"}}}},{cmp:{op:"OpLe",lhs:{currentMana:{}},rhs:{const:{val:"250000"}}}}]}},castSpell:{spellId:{itemId:36799}}}},{action:{condition:{and:{vals:[{cmp:{op:"OpLe",lhs:{remainingTime:{}},rhs:{const:{val:"25s"}}}},{auraIsInactive:{auraId:{spellId:79683},includeReactionTime:!0}}]}},castSpell:{spellId:{spellId:30451}}}},{action:{condition:{and:{vals:[{cmp:{op:"OpLe",lhs:{remainingTime:{}},rhs:{const:{val:"25s"}}}},{auraIsActive:{auraId:{spellId:79683},includeReactionTime:!0}}]}},castSpell:{spellId:{spellId:7268}}}},{action:{condition:{and:{vals:[{cmp:{op:"OpEq",lhs:{auraNumStacks:{auraId:{spellId:36032}}},rhs:{const:{val:"4"}}}},{cmp:{op:"OpEq",lhs:{auraNumStacks:{auraId:{spellId:79683},includeReactionTime:!0}},rhs:{const:{val:"1"}}}},{cmp:{op:"OpGe",lhs:{currentManaPercent:{}},rhs:{const:{val:"95%"}}}}]}},castSpell:{spellId:{spellId:30451}}}},{action:{condition:{and:{vals:[{cmp:{op:"OpEq",lhs:{auraNumStacks:{auraId:{spellId:36032}}},rhs:{const:{val:"4"}}}},{cmp:{op:"OpEq",lhs:{auraNumStacks:{auraId:{spellId:79683},includeReactionTime:!0}},rhs:{const:{val:"1"}}}},{cmp:{op:"OpLt",lhs:{currentManaPercent:{}},rhs:{const:{val:"95%"}}}}]}},castSpell:{spellId:{spellId:7268}}}},{action:{condition:{and:{vals:[{cmp:{op:"OpEq",lhs:{auraNumStacks:{auraId:{spellId:36032}}},rhs:{const:{val:"4"}}}},{cmp:{op:"OpEq",lhs:{auraNumStacks:{auraId:{spellId:79683},includeReactionTime:!0}},rhs:{const:{val:"0"}}}},{cmp:{op:"OpGe",lhs:{currentManaPercent:{}},rhs:{const:{val:"95%"}}}}]}},castSpell:{spellId:{spellId:30451}}}},{action:{condition:{and:{vals:[{cmp:{op:"OpEq",lhs:{auraNumStacks:{auraId:{spellId:36032}}},rhs:{const:{val:"4"}}}},{cmp:{op:"OpEq",lhs:{auraNumStacks:{auraId:{spellId:79683},includeReactionTime:!0}},rhs:{const:{val:"0"}}}},{cmp:{op:"OpLt",lhs:{currentManaPercent:{}},rhs:{const:{val:"90%"}}}}]}},castSpell:{spellId:{spellId:44425}}}},{action:{condition:{and:{vals:[{cmp:{op:"OpLe",lhs:{auraNumStacks:{auraId:{spellId:36032}}},rhs:{const:{val:"3"}}}},{cmp:{op:"OpEq",lhs:{auraNumStacks:{auraId:{spellId:79683},includeReactionTime:!0}},rhs:{const:{val:"2"}}}}]}},castSpell:{spellId:{spellId:7268}}}},{action:{castSpell:{spellId:{spellId:30451}}}}]},V={items:[{id:87073,gems:[76885,76643]},{id:87076,reforging:147},{id:87038,enchant:4806,gems:[76672],reforging:144},{id:89936,enchant:4892,reforging:145},{id:87027,enchant:4419,gems:[76672,76700],reforging:145},{id:88893,enchant:4414,gems:[0],reforging:167},{id:87052,enchant:4430,gems:[76643,0],reforging:165,tinker:4898},{id:87064,gems:[76700,76643,76700]},{id:89088,enchant:4895,gems:[76672],reforging:145},{id:88878,enchant:4429,reforging:146},{id:90859,reforging:167},{id:89072},{id:79331},{id:87065},{id:87066,enchant:4442,reforging:144},{id:79334,enchant:4434,reforging:167}]},U={items:[{id:86970,gems:[76885,76672],reforging:153},{id:87076,reforging:144},{id:87038,enchant:4806,gems:[76672],reforging:147},{id:86971,enchant:4892,reforging:145},{id:87010,enchant:4419,gems:[76700,76700],reforging:146},{id:86948,enchant:4414,gems:[0],reforging:168},{id:87007,enchant:4430,gems:[0],reforging:154,tinker:4898},{id:86981,gems:[76700,76643,76700],reforging:153},{id:87009,enchant:4895,gems:[76672]},{id:86969,enchant:4429,gems:[76700]},{id:90859},{id:86949,reforging:145},{id:79331},{id:87065,reforging:154},{id:87066,enchant:4442,reforging:146},{id:86960,enchant:4434,reforging:147}]},_={items:[{id:87008,gems:[76885,76643],reforging:145},{id:87076,reforging:144},{id:87011,enchant:4806,gems:[76643]},{id:90512,enchant:4892,reforging:168},{id:87169,enchant:4419,gems:[76672,76700],reforging:138},{id:86948,enchant:4414,gems:[0]},{id:87007,enchant:4430,gems:[0],tinker:4898},{id:86981,gems:[76700,76643,76700],reforging:140},{id:87009,enchant:4895,gems:[76672]},{id:87162,enchant:4429,gems:[76700],reforging:168},{id:90859},{id:86949,reforging:145},{id:87175},{id:87065,reforging:153},{id:90513,enchant:4442,gems:[76643],reforging:145},{id:86960,enchant:4434,reforging:147}]},W=e("P1 - Pre-BIS",{items:[{id:89337,gems:[76885,76682],reforging:147},{id:90596,reforging:147},{id:89340,enchant:4806,gems:[76668],reforging:147},{id:84803,enchant:4892},{id:86311,enchant:4419,gems:[76694,76682],reforging:145},{id:88893,enchant:4414,gems:[0],reforging:138},{id:86313,enchant:4430,gems:[76668,0],reforging:146,tinker:4898},{id:89062,gems:[76682,76694],reforging:147},{id:89088,enchant:4895,gems:[76694],reforging:147},{id:88878,enchant:4429,reforging:147},{id:89072,reforging:140},{id:90859,reforging:138},{id:79331},{id:84941},{id:84961,enchant:4442,reforging:146},{id:84866,enchant:4434,reforging:145}]}),K=e("P1 - Post-MSV",V),z=e("P1 - Post-HoF",U),J=e("P1 - BIS",_),Q=a("Default",x),$=t("Default",u.fromMap({[C.StatIntellect]:1.24,[C.StatSpellPower]:1,[C.StatHitRating]:1.31,[C.StatCritRating]:.52,[C.StatHasteRating]:.6,[C.StatMasteryRating]:.62})),X={name:"Default",data:m.create({talentsString:"311122",glyphs:G.create({major1:I.GlyphOfArcanePower,major2:I.GlyphOfRapidDisplacement,major3:I.GlyphOfConeOfCold,minor1:g.GlyphOfMomentum,minor2:g.GlyphOfRapidTeleportation,minor3:g.GlyphOfLooseMana})})},Y={name:"Cleave",data:m.create({talentsString:"311112",glyphs:G.create({major1:I.GlyphOfArcanePower,major2:I.GlyphOfRapidDisplacement,major3:I.GlyphOfConeOfCold,minor1:g.GlyphOfMomentum,minor2:g.GlyphOfRapidTeleportation,minor3:g.GlyphOfLooseMana})})},Z=s("Single Target",l.defaultEncounterProto()),ee=s("Cleave (2 targets)",l.defaultEncounterProto(2)),ae=n("Single Target",{talents:X,rotation:Q,encounter:Z}),te=n("Cleave (2 targets)",{talents:Y,rotation:Q,encounter:ee}),se=h.create({classOptions:{defaultMageArmor:S.MageArmorFrostArmor}}),le=A.create({flaskId:76085,foodId:74650,potId:76093,prepotId:76093}),ne={distanceFromTarget:20,profession1:N.Engineering,profession2:N.Tailoring,race:E.RaceTroll},ie=j.presets,oe=i(q.SpecArcaneMage,{cssClass:"arcane-mage-sim-ui",cssScheme:O.getCssClass(P),knownIssues:[],epStats:[C.StatIntellect,C.StatSpellPower,C.StatHitRating,C.StatCritRating,C.StatHasteRating,C.StatMasteryRating],epReferenceStat:C.StatSpellPower,displayStats:v.createDisplayStatArray([C.StatHealth,C.StatMana,C.StatStamina,C.StatIntellect,C.StatSpirit,C.StatSpellPower,C.StatMasteryRating,C.StatExpertiseRating],[B.PseudoStatSpellHitPercent,B.PseudoStatSpellCritPercent,B.PseudoStatSpellHastePercent]),gemStats:f,defaults:{gear:W.gear,epWeights:$.epWeights,statCaps:(new u).withPseudoStat(B.PseudoStatSpellHitPercent,15),softCapBreakpoints:[k.fromPseudoStat(B.PseudoStatSpellHastePercent,{breakpoints:[ie.get("5-tick - Living Bomb"),ie.get("6-tick - Living Bomb"),ie.get("7-tick - Living Bomb"),ie.get("8-tick - Living Bomb"),ie.get("9-tick - Living Bomb"),ie.get("10-tick - Living Bomb")],capType:T.TypeThreshold,postCapEPs:[.6*R]})],consumables:le,talents:X.data,specOptions:se,other:ne,raidBuffs:F,partyBuffs:M.create({}),individualBuffs:L.create({}),debuffs:H},playerIconInputs:[D()],rotationInputs:{inputs:[]},includeBuffDebuffInputs:[],excludeBuffDebuffInputs:[],otherInputs:{inputs:[o,r,p]},itemSwapSlots:[b.ItemSlotMainHand,b.ItemSlotOffHand,b.ItemSlotTrinket1,b.ItemSlotTrinket2],encounterPicker:{showExecuteProportion:!0},presets:{epWeights:[$],rotations:[Q],talents:[X,Y],gear:[W,K,z,J],builds:[ae,te]},autoRotation:e=>Q.rotation.rotation,raidSimPresets:[{spec:q.SpecArcaneMage,talents:X.data,specOptions:se,consumables:le,otherDefaults:ne,defaultFactionRaces:{[w.Unknown]:E.RaceUnknown,[w.Alliance]:E.RaceAlliancePandaren,[w.Horde]:E.RaceTroll},defaultGear:{[w.Unknown]:{},[w.Alliance]:{1:W.gear},[w.Horde]:{1:W.gear}}}]});class re extends c{constructor(e,a){super(e,a,oe);const t=[{unitStat:v.fromPseudoStat(B.PseudoStatSpellHastePercent),presets:ie}];a.sim.waitForInit().then(()=>{new d(this,{statSelectionPresets:t,enableBreakpointLimits:!0,updateSoftCaps:e=>{const t=a.getRaid()?.getBuffs(),s=!!t?.bloodlust,l=a.getRace()===E.RaceTroll,n=(e,a)=>Number(y(100*((e/100+1)/a-1),{maximumFractionDigits:5}));return this.individualConfig.defaults.softCapBreakpoints.forEach(a=>{const t=e.find(e=>e.unitStat.equals(a.unitStat));if(a.unitStat.equalsPseudoStat(B.PseudoStatSpellHastePercent)&&t){const e=new Set([...a.breakpoints]),i=a=>[...e.values()].find(e=>e.toFixed(2)===a.toFixed(2));a.breakpoints.forEach(a=>{if(s){const t=n(a,1.3);if(t>0&&(i(t)||e.add(t),l)){const a=n(t,1.2);a>0&&!i(a)&&e.add(a)}}}),t.breakpoints=[...e].sort((e,a)=>e-a)}}),e},additionalSoftCapTooltipInformation:{[C.StatHasteRating]:()=>{const e=a.getRaid()?.getBuffs(),t=!!e?.bloodlust,s=a.getRace()===E.RaceTroll;if(t||s){let e="Additional Living Bomb breakpoints have been created using the following cooldowns:\n";return t&&(e+="• Bloodlust\n"),s&&(e+="• Berserking\n"),e}return""}}})})}}export{re as A};
